{% extends "searchApp/base_template.html" %}
{% block maincontent %}
<nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar pt-5">
      <form action="/searchApp/sitl_reports/" method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" id="submitBtn" class="btn btn-primary btn-block">Generate Data</button>
      </form>
</nav>
<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4 pt-5">
      {% if sitl_report == 'initial' %}
      <h2> Welcome to our SITL Report Repository</h2>
      {% else %}
      <h2>SITL Report <span class="datechosen">{{ date }}</span></h2>
      {% if sitl_report == None %}
        <div class="alert alert-danger col-6 mt-5" role="alert">
          Data is not available for the date provided. Please try again.
        </div>
      {% else %}
        <div class="alert alert-success col-6" role="alert">
           We have found some data based on the date provided. Here's your data.
        </div>
        <div class="table-responsive border">
          <table class="table table-striped table-sm">
            <thead>
              <tr>
              {% for item in sitl_report.header %}
                <th> {{ item }} </th>
              {% endfor %}
            </tr>
            </thead>
            <tbody>
              {% for list_item in sitl_report.body %}
              <tr>
              {% for item in list_item %}
                <td> {{ item }} </td>
              {% endfor %}
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% endif %}
      {% endif %}
</main>
{% endblock %}
{% block jsFiles %}
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
<!-- Since we have less js so using the inline -->
<script>
$(document).ready(function() {
    $("#id_date_field").datepicker({ dateFormat: 'yy-mm-dd' });
});
if($(".alert").length){
  setTimeout(function(){ $(".alert").remove() }, 2000);
}
</script>
{% endblock %}
